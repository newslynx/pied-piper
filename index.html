<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Create a zip file demo</title>

<style>
	body{
		font-family: Helvetica, sans-serif;
	}
	a{
		text-decoration: none;
		color: #f0c;
		font-weight: bold;
	}
	a:hover{
		text-decoration: underline;
	}
	pre{
		border-radius: 4px;
		background-color: #eee;
		display: inline-block;
		padding: 8px 20px 8px 5px;
		border: 1px solid #ccc;
	}
</style>
</head>

<body>
	<div id="container">

		<div class="description">
			A plugin for <a href="http://gildas-lormeau.github.io/zip.js/" target="_blank">zip.js</a> to zip and download multiple data objects. <a href="https://github.com/newslynx/ykk" target="_blank">View source</a> on GitHub.
			<hr>
		</div>
		
		<h2>Create a zip file demo</h2>
		
		<ul id="demo-container">
			<li>
				<a id="download-button" href="#">Download</a>
				<span class="form-label"> the zip file.</span>
			</li>
			<li> Of this data...
			</li>
		</ul>

		<pre>
  var in_data = {
  	fruits:  [{color: 'red', kind: 'apple'},{color: 'yellow', kind: 'banana'}],
  	veggies: [{color: 'green', kind: 'kale'},{color: 'green', kind: 'broccolli', nickname: 'lame kale'}]
  };

  var key_crossover = {
  	fruits: 'Fruit list',
  	veggies: 'Veggie list'
  };
		</pre>

	</div>
	<!-- Converts array of objects into csv format -->
	<script type="text/javascript" src="js/thirdparty/dsv.min.js"></script> 
	<script type="text/javascript" src="zip.js"></script>
	<script type="text/javascript" src="src/ykk.js"></script>
	<script>

	  var in_data = {
			fruits:  [{color: 'red', kind: 'apple'},{color: 'yellow', kind: 'banana'}],
			veggies: [{color: 'green', kind: 'kale'},{color: 'green', kind: 'broccoli', nickname: 'lame kale'}]
	  };

	  var key_crossover = {
			fruits: 'Fruit list',
			veggies: 'Veggie list'
	  };

		zip.zipMultiple(in_data, 'csv', function(zippedBlob, zippedBlobHref) {
			console.log(zippedBlobHref)
			var DOM_download_btn = document.getElementById('download-button');
			DOM_download_btn.href = zippedBlobHref;
			DOM_download_btn.download = 'newslynx-data.zip';
		}, key_crossover);	
		
	</script>
</body>
</html>